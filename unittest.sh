#!/bin/bash

source assert.sh
make || exit 1

fail=0
optm=0
pass=0

test_ok()
{
	check="$(./push_swap $1 | ./checker_linux $1)"
	assert_eq $check "OK" "Fail with args '$1'" && ((++pass)) || ((++fail))
	if [ $check == "OK" ]
	then
		op_count=$(./push_swap $1 | wc -l)
		((op_count > $2)) && echo ${YELLOW}"âœ– Case with args '$1' may need optimization: ${op_count}/$2 moves used" \
			&& ((++optm)) && echo && ((--pass))
	fi
}


test_ok "0" 0
test_ok "1" 0
test_ok "-1" 0
test_ok "-2147483648" 0
test_ok "2147483647" 0


test_ok "0 1" 0
test_ok "1 0" 1
test_ok "1 -1" 1
test_ok "-1 1" 0
test_ok "2147483647 -2147483648" 1
test_ok "-2147483648 2147483647" 0


test_ok "1 2 3" 0
test_ok "1 3 2" 3
test_ok "2 3 1" 3
test_ok "2 1 3" 3
test_ok "3 1 2" 3
test_ok "3 2 1" 3


test_ok "1 2 3 4" 0
test_ok "1 2 4 3" 12
test_ok "1 3 2 4" 12
test_ok "1 3 4 2" 12
test_ok "1 4 2 3" 12
test_ok "1 4 3 2" 12
test_ok "2 1 3 4" 12
test_ok "2 1 4 3" 12
test_ok "2 3 1 4" 12
test_ok "2 3 4 1" 12
test_ok "2 4 1 3" 12
test_ok "2 4 3 1" 12
test_ok "3 1 2 4" 12
test_ok "3 1 4 2" 12
test_ok "3 2 1 4" 12
test_ok "3 2 4 1" 12
test_ok "3 4 1 2" 12
test_ok "3 4 2 1" 12
test_ok "4 1 2 3" 12
test_ok "4 1 3 2" 12
test_ok "4 2 1 3" 12
test_ok "4 2 3 1" 12
test_ok "4 3 1 2" 12
test_ok "4 3 2 1" 12


test_ok "1 2 3 4 5" 0
test_ok "1 2 3 5 4" 12
test_ok "1 2 4 3 5" 12
test_ok "1 2 4 5 3" 12
test_ok "1 2 5 3 4" 12
test_ok "1 2 5 4 3" 12
test_ok "1 3 2 4 5" 12
test_ok "1 3 2 5 4" 12
test_ok "1 3 4 2 5" 12
test_ok "1 3 4 5 2" 12
test_ok "1 3 5 2 4" 12
test_ok "1 3 5 4 2" 12
test_ok "1 4 2 3 5" 12
test_ok "1 4 2 5 3" 12
test_ok "1 4 3 2 5" 12
test_ok "1 4 3 5 2" 12
test_ok "1 4 5 2 3" 12
test_ok "1 4 5 3 2" 12
test_ok "1 5 2 3 4" 12
test_ok "1 5 2 4 3" 12
test_ok "1 5 3 2 4" 12
test_ok "1 5 3 4 2" 12
test_ok "1 5 4 2 3" 12
test_ok "1 5 4 3 2" 12
test_ok "2 1 3 4 5" 12
test_ok "2 1 3 5 4" 12
test_ok "2 1 4 3 5" 12
test_ok "2 1 4 5 3" 12
test_ok "2 1 5 3 4" 12
test_ok "2 1 5 4 3" 12
test_ok "2 3 1 4 5" 12
test_ok "2 3 1 5 4" 12
test_ok "2 3 4 1 5" 12
test_ok "2 3 4 5 1" 12
test_ok "2 3 5 1 4" 12
test_ok "2 3 5 4 1" 12
test_ok "2 4 1 3 5" 12
test_ok "2 4 1 5 3" 12
test_ok "2 4 3 1 5" 12
test_ok "2 4 3 5 1" 12
test_ok "2 4 5 1 3" 12
test_ok "2 4 5 3 1" 12
test_ok "2 5 1 3 4" 12
test_ok "2 5 1 4 3" 12
test_ok "2 5 3 1 4" 12
test_ok "2 5 3 4 1" 12
test_ok "2 5 4 1 3" 12
test_ok "2 5 4 3 1" 12
test_ok "3 1 2 4 5" 12
test_ok "3 1 2 5 4" 12
test_ok "3 1 4 2 5" 12
test_ok "3 1 4 5 2" 12
test_ok "3 1 5 2 4" 12
test_ok "3 1 5 4 2" 12
test_ok "3 2 1 4 5" 12
test_ok "3 2 1 5 4" 12
test_ok "3 2 4 1 5" 12
test_ok "3 2 4 5 1" 12
test_ok "3 2 5 1 4" 12
test_ok "3 2 5 4 1" 12
test_ok "3 4 1 2 5" 12
test_ok "3 4 1 5 2" 12
test_ok "3 4 2 1 5" 12
test_ok "3 4 2 5 1" 12
test_ok "3 4 5 1 2" 12
test_ok "3 4 5 2 1" 12
test_ok "3 5 1 2 4" 12
test_ok "3 5 1 4 2" 12
test_ok "3 5 2 1 4" 12
test_ok "3 5 2 4 1" 12
test_ok "3 5 4 1 2" 12
test_ok "3 5 4 2 1" 12
test_ok "4 1 2 3 5" 12
test_ok "4 1 2 5 3" 12
test_ok "4 1 3 2 5" 12
test_ok "4 1 3 5 2" 12
test_ok "4 1 5 2 3" 12
test_ok "4 1 5 3 2" 12
test_ok "4 2 1 3 5" 12
test_ok "4 2 1 5 3" 12
test_ok "4 2 3 1 5" 12
test_ok "4 2 3 5 1" 12
test_ok "4 2 5 1 3" 12
test_ok "4 2 5 3 1" 12
test_ok "4 3 1 2 5" 12
test_ok "4 3 1 5 2" 12
test_ok "4 3 2 1 5" 12
test_ok "4 3 2 5 1" 12
test_ok "4 3 5 1 2" 12
test_ok "4 3 5 2 1" 12
test_ok "4 5 1 2 3" 12
test_ok "4 5 1 3 2" 12
test_ok "4 5 2 1 3" 12
test_ok "4 5 2 3 1" 12
test_ok "4 5 3 1 2" 12
test_ok "4 5 3 2 1" 12
test_ok "5 1 2 3 4" 12
test_ok "5 1 2 4 3" 12
test_ok "5 1 3 2 4" 12
test_ok "5 1 3 4 2" 12
test_ok "5 1 4 2 3" 12
test_ok "5 1 4 3 2" 12
test_ok "5 2 1 3 4" 12
test_ok "5 2 1 4 3" 12
test_ok "5 2 3 1 4" 12
test_ok "5 2 3 4 1" 12
test_ok "5 2 4 1 3" 12
test_ok "5 2 4 3 1" 12
test_ok "5 3 1 2 4" 12
test_ok "5 3 1 4 2" 12
test_ok "5 3 2 1 4" 12
test_ok "5 3 2 4 1" 12
test_ok "5 3 4 1 2" 12
test_ok "5 3 4 2 1" 12
test_ok "5 4 1 2 3" 12
test_ok "5 4 1 3 2" 12
test_ok "5 4 2 1 3" 12
test_ok "5 4 2 3 1" 12
test_ok "5 4 3 1 2" 12
test_ok "5 4 3 2 1" 12
test_ok "2147483647 -1 0 1 -2147483648" 12


test_ok "-99 -98 -97 -96 -95 -94 -93 -92 -91 -90 -89 -88 -87 -86 -85 -84 -83 -82 -81 -80 -79 -78 -77 -76 -75 -74 -73 -72 -71 -70 -69 -68 -67 -66 -65 -64 -63 -62 -61 -60 -59 -58 -57 -56 -55 -54 -53 -52 -51 -50 -49 -48 -47 -46 -45 -44 -43 -42 -41 -40 -39 -38 -37 -36 -35 -34 -33 -32 -31 -30 -29 -28 -27 -26 -25 -24 -23 -22 -21 -20 -19 -18 -17 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1 0" 0
test_ok "0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99" 0
test_ok "99 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98" 700
test_ok "99 98 97 96 95 94 93 92 91 90 89 88 87 86 85 84 83 82 81 80 79 78 77 76 75 74 73 72 71 70 69 68 67 66 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41 40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0" 700
test_ok "35 66 18 16 48 10 40 98 49 81 63 71 38 65 45 14 44 19 77 85 99 82 60 53 56 83 78 41 26 33 32 90 47 17 42 80 92 24 1 59 23 68 34 87 11 88 94 97 30 2 12 76 46 67 86 25 50 95 39 75 28 51 72 58 55 84 37 70 3 43 79 31 21 93 13 62 74 27 54 22 0 91 64 57 73 4 61 96 52 15 29 20 89 9 7 8 6 69 36 5" 700
test_ok "55 70 5 68 82 20 58 87 99 97 51 48 61 17 96 36 14 73 64 62 66 28 2 19 9 13 15 57 44 83 46 98 12 33 78 49 10 7 35 63 3 38 84 16 72 11 4 69 93 91 42 74 39 77 37 67 86 75 85 95 50 80 22 43 45 6 26 18 76 29 47 30 41 56 53 0 31 90 88 60 52 40 21 27 79 71 92 23 8 81 1 25 24 59 89 94 32 34 54 65" 700
test_ok "19 86 53 62 66 91 26 92 9 2 38 96 18 85 71 13 63 0 29 64 17 65 58 28 48 30 23 88 55 3 84 97 61 31 81 46 39 74 89 60 36 43 42 8 6 56 52 51 24 95 45 35 4 69 34 33 59 54 99 67 10 47 50 87 37 20 77 44 21 49 22 93 94 40 75 5 41 57 76 32 82 79 14 16 70 12 98 25 83 78 15 27 90 73 11 68 1 80 7 72" 700
test_ok "35 56 71 42 65 85 37 19 95 78 40 50 22 76 82 61 69 34 98 91 7 28 52 92 90 5 41 97 11 14 33 77 54 68 58 9 99 45 17 57 12 94 46 24 53 47 81 1 75 83 20 59 62 93 6 31 25 21 15 0 13 10 2 84 80 43 66 89 44 79 96 51 39 26 49 36 63 88 18 55 38 64 70 73 16 3 86 29 30 60 27 48 72 8 74 87 23 67 4 32" 700
test_ok "60 32 46 67 73 86 23 14 42 81 11 2 35 28 36 95 5 96 43 91 64 53 75 17 92 87 37 22 27 52 56 7 85 45 25 80 76 77 3 51 8 70 93 9 21 0 10 97 47 50 89 15 69 63 84 88 55 26 16 44 78 4 65 40 34 59 82 31 18 39 61 54 19 49 98 58 57 13 48 30 68 12 24 94 29 83 1 6 38 66 20 33 71 74 79 62 99 72 90 41" 700
test_ok "69 24 17 13 47 84 82 54 71 27 93 2 64 1 57 92 19 44 56 38 74 31 35 51 55 0 70 4 18 66 37 33 49 3 73 50 14 79 20 40 10 60 75 34 91 15 12 95 46 21 96 45 80 7 11 88 48 30 90 76 68 52 62 25 87 61 53 77 28 6 58 67 26 36 8 39 9 29 5 85 86 41 94 63 22 81 42 89 59 16 97 98 32 83 65 43 78 72 23 99" 700
test_ok "80 58 68 47 99 55 13 60 24 11 17 76 42 63 15 49 92 14 73 18 82 22 51 75 34 20 61 97 88 8 19 41 91 23 3 12 78 16 86 74 69 94 81 31 6 65 95 26 10 56 32 48 89 77 1 57 37 72 5 39 98 50 27 9 52 21 71 2 40 30 67 44 35 59 70 38 36 45 66 43 83 54 93 53 28 0 4 96 64 90 87 25 85 33 62 79 46 29 7 84" 700
test_ok "88 67 47 25 7 58 32 64 35 49 68 41 81 87 55 93 34 16 14 73 4 94 12 75 61 26 21 63 50 92 82 28 29 89 6 30 56 40 90 86 65 45 38 44 60 33 62 37 84 0 1 11 52 51 42 83 59 72 80 36 27 5 48 19 53 71 39 8 24 46 74 96 98 23 78 85 18 77 95 99 57 2 31 20 10 91 9 70 69 13 22 15 66 76 43 79 54 17 3 97" 700
test_ok "80 90 12 65 23 98 77 29 67 22 4 38 35 52 20 14 54 63 6 86 39 17 82 30 78 53 91 68 84 49 89 40 10 56 70 8 34 36 13 71 87 46 75 57 28 81 27 33 37 72 55 16 42 94 96 2 97 69 93 43 83 64 50 59 44 48 1 99 47 74 88 24 5 95 31 15 58 73 7 79 61 66 25 26 21 0 19 51 92 11 32 76 45 9 60 62 18 41 3 85" 700
test_ok "61 72 73 84 18 96 33 87 90 13 81 14 43 41 36 97 64 35 17 68 58 99 38 23 42 85 46 80 88 47 66 57 86 65 59 56 28 76 32 82 78 60 67 92 10 40 55 77 95 51 49 74 45 89 29 69 34 20 93 9 39 70 21 7 54 12 50 31 91 22 0 63 19 11 62 44 6 5 75 24 79 48 1 27 83 37 52 15 25 16 98 53 30 8 3 2 94 4 26 71" 700
test_ok "70 0 59 30 82 1 79 99 68 49 58 39 15 87 90 6 22 12 21 3 96 46 31 67 55 76 60 61 47 11 50 34 88 5 73 20 9 83 36 28 89 7 94 26 97 80 91 38 63 43 86 4 42 57 65 35 95 69 45 74 29 51 77 16 48 62 54 10 23 81 27 40 24 19 32 25 66 14 93 84 78 8 13 53 75 56 18 85 37 17 72 98 64 33 92 2 52 41 44 71" 700
test_ok "58 49 6 22 29 89 4 98 42 9 95 56 61 85 2 5 75 97 86 43 78 12 52 93 76 92 25 53 48 45 70 81 54 8 41 94 23 14 32 91 65 24 11 27 55 69 77 59 16 17 71 79 26 34 44 30 99 68 18 72 96 80 40 88 64 60 74 67 28 62 50 57 84 13 51 37 83 35 21 39 10 82 7 3 73 31 1 38 20 0 36 47 63 66 19 90 15 46 87 33" 700
test_ok "57 60 52 31 78 74 43 77 0 17 64 38 40 30 72 39 67 69 33 15 11 16 29 19 1 21 84 51 91 32 28 24 62 61 79 6 42 71 87 8 95 70 63 3 49 9 20 56 88 23 96 41 98 13 48 34 68 35 54 22 53 93 82 59 80 27 55 10 65 81 50 86 97 12 99 7 85 92 83 14 75 94 44 90 58 2 47 18 25 4 5 73 89 66 46 36 45 37 26 76" 700


echo
norminette &>/dev/null || echo ${RED}Norme error!
echo ${RED}KO: $fail
echo ${YELLOW}OP: $optm
echo ${GREEN}OK: $pass
